{"ast":null,"code":"var _jsxFileName = \"/Users/Patrick/Desktop/Fullstack_startcode_frontend/src/components/AddFriend.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { ALL_FRIENDS } from \"./AllFriends\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ADD_FRIEND = gql`\nmutation createFriend($friend:FriendInput) {\n  createFriend(input:$friend){\n    firstName\n    lastName\n    email\n    age\n    gender\n    id\n  }\n}`;\n\nconst AddFriend = ({\n  initialFriend\n}) => {\n  _s();\n\n  const EMPTY_FRIEND = {\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\"\n  };\n  let newFriend = initialFriend ? initialFriend : { ...EMPTY_FRIEND\n  };\n  const [friend, setFriend] = useState({ ...newFriend\n  });\n  const [createFriend, {\n    loading,\n    error,\n    data\n  }] = useMutation(ADD_FRIEND, {\n    update(cache, {\n      data\n    }) {\n      const addedFreind = data.createFriend;\n      const d = cache.readQuery({\n        query: ALL_FRIENDS\n      });\n\n      if (!d) {\n        return;\n      }\n\n      let allFriends = d.allFriends;\n      cache.writeQuery({\n        query: ALL_FRIENDS,\n        data: {\n          allFriends: [...allFriends, addedFreind]\n        }\n      });\n    }\n\n  });\n\n  const handleChange = event => {\n    const id = event.currentTarget.id;\n    let friendToChange = { ...friend\n    };\n    friendToChange[id] = event.currentTarget.value;\n    setFriend({ ...friendToChange\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    createFriend({\n      variables: {\n        friend: { ...friend\n        }\n      }\n    });\n    setFriend({ ...EMPTY_FRIEND\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"FirstName\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"firstName\",\n        value: friend.firstName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"LastName \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"lastName\",\n        value: friend.lastName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Email \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"email\",\n        value: friend.email,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"submit\",\n      value: \"Save Friend\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddFriend, \"R22UgFstmg5bBURKBCUHS9Q1IWU=\", false, function () {\n  return [useMutation];\n});\n\n_c = AddFriend;\nexport default AddFriend;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddFriend\");","map":{"version":3,"sources":["/Users/Patrick/Desktop/Fullstack_startcode_frontend/src/components/AddFriend.tsx"],"names":["React","useState","useMutation","gql","ALL_FRIENDS","ADD_FRIEND","AddFriend","initialFriend","EMPTY_FRIEND","firstName","lastName","email","newFriend","friend","setFriend","createFriend","loading","error","data","update","cache","addedFreind","d","readQuery","query","allFriends","writeQuery","handleChange","event","id","currentTarget","friendToChange","value","handleSubmit","preventDefault","variables"],"mappings":";;;AAAA,OAAOA,KAAP,IAAyBC,QAAzB,QAAyC,OAAzC;AAEA,SAASC,WAAT,EAAsBC,GAAtB,QAAiC,gBAAjC;AACA,SAAQC,WAAR,QAA0B,cAA1B;;AAGA,MAAMC,UAAU,GAAGF,GAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAVA;;AAmBA,MAAMG,SAAS,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAuC;AAAA;;AACvD,QAAMC,YAAqB,GAAG;AAAEC,IAAAA,SAAS,EAAE,EAAb;AAAiBC,IAAAA,QAAQ,EAAE,EAA3B;AAA+BC,IAAAA,KAAK,EAAE;AAAtC,GAA9B;AACA,MAAIC,SAAS,GAAGL,aAAa,GAAGA,aAAH,GAAmB,EAAE,GAAGC;AAAL,GAAhD;AAEA,QAAM,CAACK,MAAD,EAASC,SAAT,IAAsBb,QAAQ,CAAC,EAAE,GAAGW;AAAL,GAAD,CAApC;AAEA,QAAM,CAACG,YAAD,EAAe;AAACC,IAAAA,OAAD;AAAUC,IAAAA,KAAV;AAAiBC,IAAAA;AAAjB,GAAf,IAAyChB,WAAW,CACxDG,UADwD,EAExD;AACAc,IAAAA,MAAM,CAACC,KAAD,EAAQ;AAACF,MAAAA;AAAD,KAAR,EAAe;AACnB,YAAMG,WAAW,GAAGH,IAAI,CAACH,YAAzB;AACA,YAAMO,CAAM,GAAGF,KAAK,CAACG,SAAN,CAAgB;AAACC,QAAAA,KAAK,EAAEpB;AAAR,OAAhB,CAAf;;AACA,UAAI,CAACkB,CAAL,EAAO;AACL;AACD;;AACD,UAAIG,UAAU,GAAGH,CAAC,CAACG,UAAnB;AACAL,MAAAA,KAAK,CAACM,UAAN,CAAiB;AACfF,QAAAA,KAAK,EAAEpB,WADQ;AAEfc,QAAAA,IAAI,EAAE;AAACO,UAAAA,UAAU,EAAE,CAAC,GAAGA,UAAJ,EAAgBJ,WAAhB;AAAb;AAFS,OAAjB;AAKD;;AAbD,GAFwD,CAA1D;;AAmBA,QAAMM,YAAY,GAAIC,KAAD,IAAgB;AACnC,UAAMC,EAAE,GAAGD,KAAK,CAACE,aAAN,CAAoBD,EAA/B;AACA,QAAIE,cAA8B,GAAG,EAAE,GAAGlB;AAAL,KAArC;AAGAkB,IAAAA,cAAc,CAACF,EAAD,CAAd,GAAqBD,KAAK,CAACE,aAAN,CAAoBE,KAAzC;AAEAlB,IAAAA,SAAS,CAAC,EAAE,GAAGiB;AAAL,KAAD,CAAT;AACD,GARD;;AASA,QAAME,YAAY,GAAIL,KAAD,IAA6C;AAChEA,IAAAA,KAAK,CAACM,cAAN;AAEAnB,IAAAA,YAAY,CAAC;AACXoB,MAAAA,SAAS,EAAC;AAACtB,QAAAA,MAAM,EAAC,EAAC,GAAGA;AAAJ;AAAR;AADC,KAAD,CAAZ;AAGAC,IAAAA,SAAS,CAAC,EAAE,GAAGN;AAAL,KAAD,CAAT;AACD,GAPD;;AAUA,sBACE;AAAM,IAAA,QAAQ,EAAEyB,YAAhB;AAAA,4BACE;AAAA,2CACW;AAAA;AAAA;AAAA;AAAA,cADX,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,EAAE,EAAC,WAAtB;AAAkC,QAAA,KAAK,EAAEpB,MAAM,CAACJ,SAAhD;AAA2D,QAAA,QAAQ,EAAEkB;AAArE;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAKE;AAAA;AAAA;AAAA;AAAA,YALF,eAME;AAAA,2CACW;AAAA;AAAA;AAAA;AAAA,cADX,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,EAAE,EAAC,UAAtB;AAAiC,QAAA,KAAK,EAAEd,MAAM,CAACH,QAA/C;AAAyD,QAAA,QAAQ,EAAEiB;AAAnE;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YANF,eAUE;AAAA;AAAA;AAAA;AAAA,YAVF,eAWE;AAAA,wCACQ;AAAA;AAAA;AAAA;AAAA,cADR,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,EAAE,EAAC,OAAtB;AAA8B,QAAA,KAAK,EAAEd,MAAM,CAACF,KAA5C;AAAmD,QAAA,QAAQ,EAAEgB;AAA7D;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YAXF,eAeE;AAAA;AAAA;AAAA;AAAA,YAfF,eAeQ;AAAA;AAAA;AAAA;AAAA,YAfR,eAgBE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,YAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAoBD,CAhED;;GAAMrB,S;UAM2CJ,W;;;KAN3CI,S;AAkEN,eAAeA,SAAf","sourcesContent":["import React, { useMemo, useState } from \"react\";\nimport IFriend from \"../interfaces/interfaces\"\nimport { useMutation, gql } from \"@apollo/client\"\nimport {ALL_FRIENDS} from \"./AllFriends\"\n\n\nconst ADD_FRIEND = gql`\nmutation createFriend($friend:FriendInput) {\n  createFriend(input:$friend){\n    firstName\n    lastName\n    email\n    age\n    gender\n    id\n  }\n}`\n\ntype AddFriendProps = {\n  initialFriend?: IFriend\n}\n\ninterface IKeyableFriend extends IFriend {\n  [key: string]: any\n}\nconst AddFriend = ({ initialFriend }: AddFriendProps) => {\n  const EMPTY_FRIEND: IFriend = { firstName: \"\", lastName: \"\", email: \"\" }\n  let newFriend = initialFriend ? initialFriend : { ...EMPTY_FRIEND }\n\n  const [friend, setFriend] = useState({ ...newFriend })\n\n  const [createFriend, {loading, error, data}] = useMutation(\n    ADD_FRIEND,\n    {\n    update(cache, {data}){\n      const addedFreind = data.createFriend;\n      const d: any = cache.readQuery({query: ALL_FRIENDS})\n      if (!d){\n        return\n      }\n      let allFriends = d.allFriends\n      cache.writeQuery({\n        query: ALL_FRIENDS,\n        data: {allFriends: [...allFriends, addedFreind]}\n      })\n\n    }\n    }\n    )\n\n  const handleChange = (event: any) => {\n    const id = event.currentTarget.id;\n    let friendToChange: IKeyableFriend = { ...friend }\n\n \n    friendToChange[id] = event.currentTarget.value;\n    \n    setFriend({ ...friendToChange })\n  }\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n \n    createFriend({\n      variables:{friend:{...friend}}\n    })\n    setFriend({ ...EMPTY_FRIEND })\n  }\n\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        FirstName<br />\n        <input type=\"text\" id=\"firstName\" value={friend.firstName} onChange={handleChange} />\n      </label>\n      <br />\n      <label>\n        LastName <br />\n        <input type=\"text\" id=\"lastName\" value={friend.lastName} onChange={handleChange} />\n      </label>\n      <br />\n      <label>\n        Email <br />\n        <input type=\"text\" id=\"email\" value={friend.email} onChange={handleChange} />\n      </label>\n      <br /><br />\n      <input type=\"submit\" value=\"Save Friend\" />\n    </form>\n  );\n}\n\nexport default AddFriend;"]},"metadata":{},"sourceType":"module"}